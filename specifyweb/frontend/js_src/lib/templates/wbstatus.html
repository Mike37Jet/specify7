<% if (status) { %>
  <% const {uploaderstatus, taskstatus, taskinfo} = status;
  const {total='unknown', current} = taskinfo;
  let operation = uploaderstatus.operation[0].toUpperCase()+uploaderstatus.operation.slice(1);
  const mappedOperation = {
    'Validating': 'Validation',
    'Uploading': 'Upload',
    'Unuploading': 'Rollback',
  }[operation] ?? operation;
  if(operation==='Unuploading') operation = 'Rollback';
  if(taskstatus === 'PENDING') { %>
    <p>
      <%= mappedOperation %> of this Data Set should begin shortly.<br><br>
      If this message persists for longer than 30 seconds, the
      <%= mappedOperation %> process is busy with another Data Set. Specify
      currently supports only one <%= mappedOperation %> process at a time for
      a Specify 7 installation. Please try again later.
    </p>
  <% }
  else if(taskstatus === 'FAILURE'){ %>
    Error occurred during <%= uploaderstatus.operation %>:<br>
    <%- taskinfo %>
  <% } else {
    const title = (
     (
       current === total ||
       typeof current === 'undefined' ||
       typeof total === 'undefined'
     ) ?
      operation === "Uploading" ?
       'Updating trees...' :
       `${operation}...` :
        `${operation} Row: ${current}/${total}`
    ); %>
    <div style="width:100%">
      <br>
      <b><%= title %></b>
      <br>
      <div class="wb-status-progress-bar"></div>
    </div>
  <% } %>
<% } else { %>
  <p>Loading...</p>
<% } %>
